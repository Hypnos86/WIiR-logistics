{% extends 'base.html' %}
{% load bootstrap %}
{% load static %}

{% block title %} WIiR - Plany {% endblock %}

{% block content %}
<section class="container">
    <h4 class="title-center">
        <span id="titleModule">{{ title }}</span>
    </h4>

    <div class="my-2 card py-2">
        <ul class="list-row-ul">
            <li class="list-row-li">
                Plany&nbsp;
                <span id="planQuantity" class="li-row-info">{{ planQuantity }}</span>
            </li>
        </ul>
    </div>

    <div class="d-flex justify-content-evenly py-2">
        <button type="button"
                class="btn-icon mx-4"
                data-bs-toggle="tooltip"
                data-bs-placement="bottom"
                title="Dodaj plan"
                data-url="{% url 'plan:modalAddPlan' %}"
                onclick="openModal(this)">
            <i class="bi bi-plus-circle-fill size-icon" aria-hidden="true"></i>
        </button>
    </div>

    <hr>
</section>

<!-- Modal (Add New Plan) -->
<div class="modal fade" id="newPlanModal" tabindex="-1" aria-labelledby="newPlanModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <!-- Treść modala zostanie załadowana dynamicznie -->
        </div>
    </div>
</div>

{% block plan_content %}
<!-- Zawartość childa pojawi się tutaj -->
{% endblock %}

<script>
    function openModal(button) {
        var url = $(button).data("url");
        $("#newPlanModal .modal-content").load(url);
        $("#newPlanModal").modal("show");
    }

    document.addEventListener('DOMContentLoaded', function () {
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        tooltipTriggerList.forEach(function (tooltipTriggerEl) {
            new bootstrap.Tooltip(tooltipTriggerEl);
        });
    });
</script>
{% endblock %}